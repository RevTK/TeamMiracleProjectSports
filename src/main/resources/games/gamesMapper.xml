<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tm.nmp.games.GamesMapper">

<select id="getAllPostCount" parameterType="com.tm.nmp.games.TotoSelector" resultType="java.lang.Integer">
select count(*) from toto_board, account where toto_id = ac_id and toto_title like '%'||#{search}||'%'
</select>

<select id="getTotoAll" parameterType="com.tm.nmp.games.TotoSelector" resultType="com.tm.nmp.games.TotoDTO">
select * from (
			select rownum as rn, toto_no, ac_nick, toto_cat, toto_title, toto_content, toto_img, toto_video, toto_date
			from (
				select * from toto_board, account where toto_id = ac_id and toto_title like '%'||#{search}||'%' order by toto_date desc
			)
		)
	where rn &gt;= #{start} and rn &lt; = #{end}
</select>

<select id="getToto" parameterType="com.tm.nmp.games.TotoDTO" resultType="com.tm.nmp.games.TotoDTO">
select * from toto_board where toto_no = #{toto_no}
</select>

<update id="updateToto" parameterType="com.tm.nmp.games.TotoDTO">
update toto_board set toto_title = #{toto_title}, toto_content = #{toto_content} where toto_no = #{toto_no}
</update>

<delete id="deleteToto" parameterType="com.tm.nmp.games.TotoDTO">
delete from toto_board where toto_no = #{toto_no}
</delete>

<insert id="insertToto" parameterType="com.tm.nmp.games.TotoDTO">
insert into toto_board values(toto_seq.nextval,#{toto_nick},#{toto_id},#{toto_title},#{toto_content},sysdate,#{toto_img},#{toto_video},#{toto_cat},#{toto_count})
</insert>

<select id="getAllcomment" parameterType="com.tm.nmp.games.TotoDTO" resultType="com.tm.nmp.games.TotoComment">
select * from toto_comment_board where toto_comment_boardno = #{toto_no}
</select>

<insert id="writeComment" parameterType="com.tm.nmp.games.TotoComment">
insert into toto_comment_board values(toto_comment_seq.nextval,#{toto_comment_boardno},#{toto_comment_content},sysdate)
</insert>

<delete id="deleteComment" parameterType="com.tm.nmp.games.TotoComment">
delete from toto_comment_board where toto_comment_no = #{toto_comment_no}
</delete>

<update id="updateComment" parameterType="com.tm.nmp.games.TotoComment">
update toto_comment_board set toto_comment_content = #{toto_comment_content} where toto_comment_no = #{toto_comment_no}
</update>

</mapper>